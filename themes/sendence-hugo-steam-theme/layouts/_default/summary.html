<article class="preview">
    <header>
        <h2 class="post-title"><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
        <div class="post-meta"><time datetime="{{ .Date.Format "02 January 2006" }}">{{ .Date.Format "Monday, January 02, 2006" }}</time></div>
    </header>
    <section class="post-excerpt">
        {{ if and (not .Description) (.Site.Params.useSummaryIfNoDescription)}}
        <p>{{ .Summary }}&hellip;</p>
        {{ else }}
        <p>{{ .Description | markdownify }}</p>
        {{ end }}
        <p class="readmore"><a href="{{ .RelPermalink }}">{{ .Site.Params.keepReadingStr }} <i class="fa fa-angle-double-right" style="padding-left: 5px;"></i></a></p>
        <div class="post-meta">
          <!-- All metadata elements combined below readmore button -->
          <p>
            {{ $author_file :=  printf "/data/author/%s.json" .Params.author }}
            {{ $author_json := getJSON $author_file }}
            <span class="author-name">by {{ $author_json.name }}</span><span class="date"> on <time datetime="{{ .Date.Format "02 January 2006" }}">{{ .Date.Format "Monday, January 02, 2006" }}</time></span>
          </p>
          {{ if .Params.categories }}
            <div class="post-meta categories">
            Posted in
            {{ $ncats := sub (len .Params.categories) 1}}
            {{ range $index, $tag := .Params.categories }}
              {{ $url := printf "categories/%s" ( . | urlize) }}
              <a href="{{ $url | relURL }}">{{ . }}</a>{{if ne $index $ncats }}, {{ end }}
            {{ end }}
            </div>
          {{ end }}
          {{ if .Params.tags }}
          <section class="post-tags" style="">
            <div class="post-meta tags">
              <i class="fa fa-fw fa-tag"></i>
              {{ $ntags := sub (len .Params.tags) 1}}
              {{ range $index, $tag := .Params.tags }}
                {{ $url := printf "tags/%s" ( . | urlize) }}
                <a href="{{ $url | relURL }}">{{ . }}</a>{{if ne $index $ntags }}, {{ end }}
              {{ end }}
            </div>
          </section>
          {{ end }}
        </div>
    </section>
</article>
